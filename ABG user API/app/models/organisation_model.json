{
  "$id": "organisation_model.json",
  "title": "organisation_model",
  "description": "schema to store organisation details",
  "type": "object",
  "properties": {
    "form_type": {
      "type": "string",
      "enum": [
        "supplier",
        "zone",
        "location",
        "hub",
        "auditor"
      ]
    },
    "legal_name": {
      "type": "string",
      "minLength": 3,
      "maxLength": 15
    },
    "name": {
      "type": "string",
      "minLength": 3,
      "maxLength": 15
    },
    "org_type": {
      "type": "string",
      "enum": [
        "supplier",
        "auditor",
        "wastelink",
        "zone",
        "pickup_location",
        "hub",
        "customer",
        "vendor"
      ]
    },
    "code": {
      "type": "string"
    },
    "gst_no": {
      "type": "string",
      "minLength": 3,
      "maxLength": 15
    },
    "pan_no": {
      "type": "string",
      "minLength": 3,
      "maxLength": 15
    },
    "address": {
      "$ref": "address_model.json"
    },
    "bank_details": {
      "$ref": "bank_model.json"
    },
    "metadata": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "file_size": {
            "type": "string"
          },
          "path": {
            "type": "string"
          },
          "doc_type": {
            "type": "string"
          }
        },
        "required": []
      }
    },
    "mapping_info": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "id": {
            "type": "string"
          },
          "name": {
            "type": "string"
          },
          "type": {
            "type": "string",
            "enum": [
              "supplier",
              "auditor",
              "wastelink",
              "zone",
              "pickup_location",
              "hub",
              "customer",
              "vendor"
            ]
          }
        },
        "required": []
      }
    },
    "additional_info": {
      "type": "object",
      "properties": {
        "fpe_required": {
          "type": "string",
          "enum": [
            "yes",
            "no",
            "hybrid"
          ]
        },
        "pre_payment_required": {
          "type": "string",
          "enum": [
            "prepaid",
            "postpaid",
            "both"
          ]
        },
        "audit_required": {
          "type": "string",
          "enum": [
            "yes",
            "no",
            "hybrid"
          ]
        },
        "working_days": {
          "type": "object",
          "properties": {
            "monday": {
              "type": "object",
              "properties": {
                "open_time": {
                  "type": "string"
                },
                "close_time": {
                  "type": "string"
                }
              }
            },
            "tuesday": {
              "type": "object",
              "properties": {
                "open_time": {
                  "type": "string"
                },
                "close_time": {
                  "type": "string"
                }
              }
            },
            "wednesday": {
              "type": "object",
              "properties": {
                "open_time": {
                  "type": "string"
                },
                "close_time": {
                  "type": "string"
                }
              }
            },
            "thursday": {
              "type": "object",
              "properties": {
                "open_time": {
                  "type": "string"
                },
                "close_time": {
                  "type": "string"
                }
              }
            },
            "friday": {
              "type": "object",
              "properties": {
                "open_time": {
                  "type": "string"
                },
                "close_time": {
                  "type": "string"
                }
              }
            },
            "saturday": {
              "type": "object",
              "properties": {
                "open_time": {
                  "type": "string"
                },
                "close_time": {
                  "type": "string"
                }
              }
            },
            "sunday": {
              "type": "object",
              "properties": {
                "open_time": {
                  "type": "string"
                },
                "close_time": {
                  "type": "string"
                }
              }
            }
          }
        },
        "tag": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "lat": {
          "type": "string"
        },
        "lon": {
          "type": "string"
        },
        "geo_location_url": {
          "type": "string"
        },
        "equipment": {
          "type": "array",
          "items": {
            "type": "string"
          }
        }
      },
      "required": []
    }
  },
  "required": [
    "form_type",
    "legal_name",
    "org_type"
  ],
"allOf": [
  {
    "if": {
      "properties": {
        "form_type": {
          "const": "supplier"
        }
      },
      "required": ["form_type"]
    },
    "then": {
      "required": [
        "name",
        "address",
        "mapping_info"
      ]
    }
  },
  {
    "if": {
      "properties": {
        "form_type": {
          "const": "hub"
        }
      },
      "required": ["form_type"]
    },
    "then": {
      "required": [
        "name",
        "legal_name",
        "address"
      ]
    }
  },
  {
    "if": {
      "properties": {
        "form_type": {
          "const": "auditor"
        }
      },
      "required": ["form_type"]
    },
    "then": {
      "required": [
        "name",
        "legal_name",
        "address"
      ]
    }
  },
  {
    "if": {
      "properties": {
        "form_type": {
          "const": "zone"
        }
      },
      "required": ["form_type"]
    },
    "then": {
      "required": [
        "name",
        "legal_name",
        "address",
        "mapping_info"
      ]
    }
  },
  {
    "if": {
      "properties": {
        "form_type": {
          "const": "location"
        }
      },
      "required": ["form_type"]
    },
    "then": {
      "required": [
        "name",
        "legal_name",
        "additional_info",
        "address",
        "mapping_info"
      ]
    }
  }
]
}
